<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/square-logo.png">
    <link rel="icon" type="image/png" href="/assets/square-logo.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>NextDev Academy 2022</title>
</head>

<body class="pb-5" style="background-color: #f8f8f8;">
    <header class="p-3 mb-3 border-bottom" style="background-color: #ebebeb;">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-dark text-decoration-none">
                    <img class="fikipedia-logo" src="../assets/square-logo.png" alt="Logo Fikipedia">
                </a>

                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0 fw-bold">
                    <li><a href="#" class="nav-link px-2 link-secondary">Dashboard</a></li>
                    <li>
                        <div class="dropdown">
                            <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton1"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Assignment
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                <li><a class="dropdown-item" href="/assignment-1.html">assignment-1</a></li>
                                <li><a class="dropdown-item" href="/assignment-2.html">assignment-2</a></li>
                                <li><a class="dropdown-item" href="/assignment-3.html">assignment-3</a></li>
                                <li><a class="dropdown-item" href="/final-project/index.html">Final Project</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>

                <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
                    <input type="search" class="form-control" placeholder="Search..." aria-label="Search">
                </form>

                <div class="dropdown text-end">
                    <a href="#" class="d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUser1"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="https://blog.hacktiv8.com/content/images/2018/01/AppIcon.jpg" alt="Hacktiv8"
                            width="32" height="32" class="rounded-circle">
                    </a>
                    <ul class="dropdown-menu text-small" aria-labelledby="dropdownUser1"
                        style="background-attachment: fixed;">
                        <li><a class="dropdown-item" href="#">Settings</a></li>
                        <li><a class="dropdown-item" href="#">Profile</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#">Sign out</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <div id="intro">
        <div class="container">
            <div class="p-4 p-md-5 mb-4 text-white rounded bg-dark bg-electrical">
                <div class="col-md-6 px-0">
                    <h1 class="display-4 fw-bold">HouseHold Power Consumption Analysis</h1>
                    <p>Dataset `Household Power Consumption`
                        adalah dataset
                        yang mengumpulkan data pemakaian listrik dalam rumah tangga dengan sampling rate setiap 1 menit
                        yang dikumpulkan selama 4 tahun dari tahun 16 Desember 2006 - 26 November 2010. </p>
                    <p class="collapse multi-collapse my-3" id="readmore">
                        selain data
                        pemakaian listrik, data ini
                        juga menyajikan data tegangan dan arus yang dideteksi pada waktu tersebut.
                        <br>
                        <br>
                        Jika dilihat lebih dalam, maka pada dataset di tempat ini menggunakan sumber listrik ac
                        dengan
                        tegangan standart sebesar 240V, dan untuk memastikan bahwa data tersebut sudah siap untuk
                        diproses, maka kita perlu menganalisa mengenai min, max, dan simpangan rata" pada
                        masing-masing
                        Feature, karena dataset pada kali ini menggunakan tipedata dalam bentuk numerik.</p>

                    <p class="lead mb-0">
                        <button class="btn p-0 text-white fw-bold" type="button" data-bs-toggle="collapse"
                            data-bs-target=".multi-collapse" aria-expanded="false"
                            aria-controls="readmore readmore2">Continue reading...</button>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="form-app">
        <div class="container">
            <div class="row mb-1">
                <div class="col-md-3 mb-3">
                    <label for="datetm" class="form-label fw-bolder">Datetime</label>
                    <input type="text" class="form-control" id="datetm" placeholder="dd/mm/yyyy hh:mm:ss">
                </div>
                <div class="col-md-3 mb-3">
                    <label for="gap" class="form-label fw-bolder">Global Active Power</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="gap" placeholder="0.0">
                        <span class="input-group-text">KW</span>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="grp" class="form-label fw-bolder">Global reactive Power</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="grp" placeholder="0.0">
                        <span class="input-group-text">KVar</span>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="voltage" class="form-label fw-bolder">Voltage</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="voltage" placeholder="240">
                        <span class="input-group-text">Volt</span>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="gi" class="form-label fw-bolder">Global Intensity</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="gi" placeholder="0.0">
                        <span class="input-group-text">Ampere</span>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="sm1" class="form-label fw-bolder">Sub metering 1</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="sm1" placeholder="0.0">
                        <span class="input-group-text">KW</span>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="sm2" class="form-label fw-bolder">Sub metering 2</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="sm2" placeholder="0.0">
                        <span class="input-group-text">KW</span>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="sm3" class="form-label fw-bolder">Sub metering 3</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="sm3" placeholder="0.0">
                        <span class="input-group-text">KW</span>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-center">
                <button type="button" id="generate" class="btn btn-outline-primary">Generate</button>
                <button type="button" id="check-cluster" class="btn btn-primary mx-3">Check Clustering</button>
                <div class="form-control text-muted" id="cluster-result" style="width: 30%;">Result...</div>
            </div>
        </div>
    </div>
    <script src="/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>
    <script>
        var precission2 = (numb) => {
            return (Math.floor(numb * 100)) / 100
        }

        document.getElementById("generate").addEventListener("click", generate)
        document.getElementById("check-cluster").addEventListener("click", clustering)

        function generate() {
            datetm = document.getElementById("datetm");
            gap = document.getElementById("gap");
            grp = document.getElementById("grp");
            voltage = document.getElementById("voltage");
            gi = document.getElementById("gi");
            sm1 = document.getElementById("sm1");
            sm2 = document.getElementById("sm2");
            sm3 = document.getElementById("sm3");

            now = new Date()
            datetm.value =
                `${("0" + now.getDay()).slice(-2)}/${("0" + now.getMonth()).slice(-2)}/${now.getFullYear()} ${("0" + now.getHours()).slice(-2)}:${("0" + now.getMinutes()).slice(-2)}:${("0" + now.getSeconds()).slice(-2)}`;
            gap.value = precission2(Math.random() * 11.1);
            grp.value = precission2(Math.random() * 1.39);
            voltage.value = Math.floor(Math.random() * (254 - 223)) + 223;
            gi.value = precission2(Math.random() * 48.4);
            // sm1.value = Math.random();
            // sm2.value = Math.random();
            // sm3.value = Math.random();
        }

        function clustering() {
            gap = document.getElementById("gap");
            grp = document.getElementById("grp");
            voltage = document.getElementById("voltage");
            gi = document.getElementById("gi");
            sm1 = document.getElementById("sm1");
            sm2 = document.getElementById("sm2");
            sm3 = document.getElementById("sm3");
            cluster_result = document.getElementById("cluster-result");
            cluster_result.innerHTML =
                `<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>  Loading...`;

            fetch(`https://fiki-kmeans-clustering.herokuapp.com/?global_active_power=${gap.value}&global_reactive_power=${grp.value}&voltage=${voltage.value}&global_intensity=${gi.value}&sub_metering_1=${sm1.value}&sub_metering_2=${sm2.value}&sub_metering_3=${sm3.value}`
                    // , {
                    //         "method": "GET",
                    //         "data": {
                    //             "global_active_power": gap.value,
                    //             "global_reactive_power": grp.value,
                    //             "voltage": voltage.value,
                    //             "global_intensity": gi.value,
                    //             "sub_metering_1": sm1.value,
                    //             "sub_metering_2": sm2.value,
                    //             "sub_metering_3": sm3.value,
                    //         }
                    //     }
                )
                .then(response =>
                    response.json()
                ).then(response =>
                    // console.log(JSON.parse(response.res)[0])
                    document.getElementById("cluster-result").innerHTML =
                    `Cluster : ${JSON.parse(response.res)[0]}`
                )
                .catch(err => {
                    console.error(err);
                });
        }
    </script>
</body>

</html>